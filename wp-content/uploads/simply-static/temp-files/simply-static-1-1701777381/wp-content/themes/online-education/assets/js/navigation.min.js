window.oleNavigation=new function(){const o=this;this.primaryMenu=document.getElementById("site-navigation"),this.mobileCanvas=document.querySelector(".ole-mobile-canvas"),this.mobileMenu=this.mobileCanvas&&this.mobileCanvas.querySelector("#mobile-navigation"),this.links=this.primaryMenu&&this.primaryMenu.getElementsByTagName("a"),this.linksWithChildren=this.primaryMenu&&this.primaryMenu.querySelectorAll(".menu-item-has-children > a, .page_item_has_children > a"),this.mobileSubMenu=this.mobileMenu&&this.mobileMenu.querySelectorAll(".sub-menu"),this.subMenu=this.primaryMenu&&this.primaryMenu.querySelectorAll(".sub-menu"),this.toggleBtn=document.getElementById("menu-toggle"),this.closeMobileMenu=document.querySelector(".close-mobile-menu"),this.search=this.primaryMenu&&this.primaryMenu.querySelector(".ole-header-search"),this.searchToggle=this.search&&this.search.querySelector(".ole-header-search-toggle"),this.slideUp=function(e,t=300){e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.boxSizing="border-box",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,setTimeout(()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},this.slideDown=function(e,t=500){e.style.removeProperty("display");let o=window.getComputedStyle(e).display;"none"===o&&(o="block"),e.style.display=o;var i=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.boxSizing="border-box",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=i+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},this.trapFocus=function(e,t=0){var o='a, button, input[type="search"]';const i=Array.prototype.slice.call(e.querySelectorAll(o)),s=e.querySelectorAll(o)[0],r=i[i.length-1];i[t].focus(),e.addEventListener("keydown",e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===s&&(e.preventDefault(),r.focus()):document.activeElement===r&&(e.preventDefault(),s.focus()))})},this.slideToggle=function(e,t=300){return"none"===window.getComputedStyle(e).display?(e.classList.add("show"),o.slideDown(e,t)):(e.classList.remove("show"),o.slideUp(e,t))},this.toggleSearch=function(e){e.preventDefault();const t=o.search.querySelector(".ole-header-searchform");o.search.classList.toggle("active"),o.slideToggle(t,200),o.search.classList.contains("active")?(o.trapFocus(o.search,1),document.addEventListener("click",e=>{o.search.contains(e.target)||(o.slideUp(t,300),o.search.classList.remove("active"))})):this.focus()},this.toggleMobileNavigation=function(e){e.preventDefault(),o.mobileCanvas.classList.toggle("active"),"true"===o.closeMobileMenu.getAttribute("aria-expanded")?(o.closeMobileMenu.setAttribute("aria-expanded","false"),o.toggleBtn.focus(),document.body.style.removeProperty("overflow")):(o.closeMobileMenu.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden",o.trapFocus(o.mobileCanvas,1))},this.toggleSubMenu=function(e){e.preventDefault(),this.classList.toggle("active");e=e.currentTarget.parentNode.nextElementSibling;o.slideToggle(e)},this.toggleFocus=function(e){if("focus"===e.type||"blur"===e.type){let e=this;for(;!e.classList.contains("nav-menu");)"li"===e.tagName.toLowerCase()&&e.classList.toggle("focus"),e=e.parentNode}if("touchstart"===e.type){const t=this.parentNode;e.preventDefault();for(const o of t.parentNode.children)t!==o&&o.classList.remove("focus");t.classList.toggle("focus")}},this.init=function(){if(o.primaryMenu){o.primaryMenu.classList.contains("nav-menu")||o.primaryMenu.classList.add("nav-menu"),o.toggleBtn&&(o.toggleBtn.addEventListener("click",this.toggleMobileNavigation),o.closeMobileMenu.addEventListener("click",this.toggleMobileNavigation)),o.mobileSubMenu&&o.mobileSubMenu.forEach(e=>{e.parentNode.querySelector(".ole-submenu-toggle").addEventListener("click",o.toggleSubMenu)}),o.search&&o.searchToggle.addEventListener("click",this.toggleSearch);for(const e of this.links)e.addEventListener("focus",this.toggleFocus,!0),e.addEventListener("blur",this.toggleFocus,!0);for(const t of this.linksWithChildren)t.addEventListener("touchstart",this.toggleFocus,{passive:!0})}else o.toggleBtn.style.display="none"},this.init()};